# templates [![NPM version](https://img.shields.io/npm/v/templates.svg?style=flat)](https://www.npmjs.com/package/templates) [![NPM monthly downloads](https://img.shields.io/npm/dm/templates.svg?style=flat)](https://npmjs.org/package/templates) [![NPM total downloads](https://img.shields.io/npm/dt/templates.svg?style=flat)](https://npmjs.org/package/templates) [![Linux Build Status](https://img.shields.io/travis/jonschlinkert/templates.svg?style=flat&label=Travis)](https://travis-ci.org/jonschlinkert/templates) [![Windows Build Status](https://img.shields.io/appveyor/ci/jonschlinkert/templates.svg?style=flat&label=AppVeyor)](https://ci.appveyor.com/project/jonschlinkert/templates)

> System for creating and managing template collections, and rendering templates with any node.js template engine. Can be used as the basis for creating a static site generator or blog framework.

Please consider following this project's author, [Jon Schlinkert](https://github.com/jonschlinkert), and consider starring the project to show your :heart: and support.

- [Install](#install)
- [Usage](#usage)
- [API](#api)
  * [Templates (App)](#templates-app)
  * [Collection](#collection)
- [About](#about)

_(TOC generated by [verb](https://github.com/verbose/verb) using [markdown-toc](https://github.com/jonschlinkert/markdown-toc))_

## Install

Install with [npm](https://www.npmjs.com/):

```sh
$ npm install --save templates
```

## Usage

```js
const Templates = require('templates');
const app = new Templates();
```

## API

### [Templates](index.js#L21)

Create an instance of `Templates` with the given [options](#options).

**Params**

* `options` **{Object}**

**Example**

```js
const app = new Templates(options);
```

### [.get](index.js#L106)

Get a cached file.

**Params**

* `key` **{String|RegExp|Function}**
* `returns` **{Object}**: Returns the file if found.

**Example**

```js
// get a file from the collection passed as the last argument
console.log(app.get('foo/bar.html', 'pages'));
console.log(app.get('foo.html', 'pages'));

// or get the first matching file from any registered collection
console.log(app.get('foo/bar.html'));
console.log(app.get('foo.html'));
```

### [.get](index.js#L144)

Get a cached file.

**Params**

* `key` **{String|RegExp|Function}**
* `returns` **{Object}**: Returns the file if found.

**Example**

```js
// iterates over all collections
app.get('foo/bar.html');
app.get('foo.html');

// or specify the collection name
app.get('foo/bar.html', 'pages');
app.get('foo.html', 'pages');
```

### [.find](index.js#L160)

Find a cached file with the given `fn`.

**Params**

* `file` **{Object}**
* `returns` **{Object}**: Returns the file, if found.

**Example**

```js
const file = app.find(file => file.basename === 'foo.hbs');
```

Create an un-cached collection.

**Params**

* `name` **{String}**: (required) Collection name
* `options` **{Object}**
* `returns` **{Object}**: Returns the collection.

Create a cached file collection. When the collection emits a `file`, the file
is also cached on `app` to make lookups more performant.

**Params**

* `name` **{String}**: (required) Collection name
* `options` **{Object}**
* `returns` **{Object}**: Returns the collection.

### [.kind](index.js#L245)

Get a "kind" of template. If the _kind_ doesn't already exist, it
will be created and an empty object will be returned.

**Params**

* `name` **{string}**
* `returns` **{object}**

### [.option](lib/common.js#L88)

Get or set options on `app.options`.

**Params**

* `key` **{String|object}**
* `val` **{Object}**
* `returns` **{Object}**: Returns the instance when setting, or the value when getting.

**Example**

```js
// set option
app.option('foo', 'bar');
app.option({ foo: 'bar' });
// get option
console.log(app.option('foo')); //=> 'bar'
```

### [.data](lib/common.js#L127)

Get or set data on `app.cache.data`.

**Params**

* `key` **{String|object}**
* `val` **{Object}**
* `returns` **{Object}**: Returns the instance when setting, or the value when getting.

**Example**

```js
// set data
app.data('foo', 'bar');
app.data({ foo: 'bar' });
// get data
console.log(app.data('foo')); //=> 'bar'
```

### [.file](lib/common.js#L159)

Create a new file.

**Params**

* `key` **{String|object}**: The file path, or object.
* `val` **{Object}**: File object, when `key` is a path string.
* `returns` **{Object}**: Returns the file.

**Example**

```js
app.file('/some/template.hbs', {});
app.file({ path: '/some/template.hbs', contents: Buffer.from('...') });
```

### [.engine](lib/common.js#L196)

Register a file engine callback `fn` as `name`.

**Params**

* `exts` **{String|array}**: String or array of file extensions.
* `engine` **{Object|function}**: Engine object or function.
* `settings` **{Object}**: Optionally pass engine options as the last argument.
* `returns` **{Object}**: Returns the given or cached engine.

**Example**

```js
app.engine('hbs', require('engine-handlebars'));
```

### [.helper](lib/common.js#L241)

Register a helper function as `name`, or get helper `name` if only one argument is passed.

**Params**

* `name` **{String|object}**: Helper name or object of helpers.
* `helper` **{Function}**: helper function, if name is not an object

**Example**

```js
app.helper('lowercase', str => str.toLowerCase());
console.log(app.helper('lowercase')) //=> [function lowercase]
```

### [.renderLayout](lib/common.js#L278)

Recursively renders layouts and "nested" layouts on the given `file`.

**Params**

* `file` **{Object}**
* `options` **{Object}**: Optionally pass an object of `layouts`. Or files from any collections with type "layout" will be used.

**Example**

```js
app.renderLayout(file);
```

### [.compile](lib/common.js#L322)

Compile `file` with the given `options`.

**Params**

* `file` **{Object|String}**: File object.
* `options` **{Object}**
* `returns` **{Object}**: Returns a promise with the file.

**Example**

```js
const file = app.file({ path: 'some-file.hbs', contents: Buffer.from('...') });
app.compile(file)
  .then(file => console.log(file.fn)) //=> [function]

// you can call the compiled function more than once
// to render the file with different data
file.fn({title: 'Foo'});
file.fn({title: 'Bar'});
file.fn({title: 'Baz'});
```

Prepare a file to be rendered. Gets the file, if `file.path` is defined,
creates options and context for the file, and detects the engine to use.
The options object will include any layouts, partials, or helpers to
pass to the engine.

**Params**

* **{object|string}**: val File or file.path.
* **{object}**: locals
* **{object}**: options
* `returns` **{object}**: Returns an object with `{ file, opts, context, engine }`

Render a file.

**Params**

* `file` **{Object|string}**: File path or object.
* `locals` **{Object}**: Data to use for rendering the file.
* **{Object}**: options
* `returns` **{Object}**

### [.handlers](lib/common.js#L497)

Add one or more middleware handler methods. Handler methods may also be added by passing an array of handler names to the constructor on the `handlers` option. This method is also aliased as `.handler()`.

**Params**

* `methods` **{String|array}**: Method names
* `options` **{Object}**
* `returns` **{Object}**: Returns the instance for chaining.

**Example**

```js
app.handlers(['onLoad', 'preRender']);
```

### [.handle](lib/common.js#L529)

Run middleware `method` on the given `file`.

**Params**

* `method` **{String}**: Middleware method to run.
* `file` **{Object}**

**Example**

```js
// run a specific method
app.handle('onLoad', file)
  .then(file => console.log('File:', file))
  .catch(console.error);

// run multiple methods
app.handle('onLoad', file)
  .then(file => app.handle('preRender', file))
  .catch(console.error);

// run all methods
app.handle(file)
  .then(file => console.log('File:', file))
  .catch(console.error);
```

Create the "key" to use for caching a file.

**Params**

* `file` **{Object}**
* `returns` **{String}**: Returns the key.

Returns true if the given value is an instance of `File`.

**Params**

* `val` **{Object}**
* `returns` **{Boolean}**

Get the `File` class to use for creating new files on the collection.

* `returns` **{Class}** `File`: Returns the File class.

### [Collection](lib/collection.js#L21)

Create a new `Collection` with the given `options`.

**Params**

* `name` **{String}**: (required) Collection name
* `options` **{Object}**

**Example**

```js
const collection = new Collection();
```

### [.set](lib/collection.js#L68)

Add a file to `collection.files`.

**Params**

* `key` **{String|object}**
* `val` **{Object|undefined}**
* `returns` **{Object}**: Returns the file.

**Example**

```js
collection.set('foo/bar.html', { contents: Buffer.from('...') });
collection.set({ path: 'foo/bar.html', contents: Buffer.from('...') });
```

### [.get](lib/collection.js#L105)

Get a file from `collection.files`.

**Params**

* `key` **{String|RegExp|Function}**
* `returns` **{Object}**: Returns the file if found.

**Example**

```js
collection.get('foo/bar.html');
collection.get('foo.html');
collection.get('foo');
```

### [.find](lib/collection.js#L123)

Find a file on `collection.files` with the given `fn`.

**Params**

* `file` **{Object}**
* `returns` **{Object}**: Returns the file, if found.

**Example**

```js
const file = collection.find(file => file.basename === 'foo.hbs');
```

### [.delete](lib/collection.js#L144)

Remove `file` from `collection.files`.

**Params**

* `file` **{Object|string}**
* `returns` **{Object}**: Returns the removed file.

**Example**

```js
collection.delete(file);
collection.delete('/foo/bar.hbs');
```

**Params**

* `prop` **{String|Function}**: Object path or function that returns the value to group by.
* `options` **{Object}**
* `returns` **{Object}**

**Example**

```js
console.log(posts.groupBy('data.tags'));
console.log(posts.groupBy('extname'));
console.log(posts.groupBy('stem'));
console.log(posts.groupBy(file => file.data.tags));
```

Static method that returns true if the given value is a collection instance.

**Params**

* `val` **{Any}**
* `returns` **{Boolean}**

### [.option](lib/common.js#L88)

Get or set options on `app.options`.

**Params**

* `key` **{String|object}**
* `val` **{Object}**
* `returns` **{Object}**: Returns the instance when setting, or the value when getting.

**Example**

```js
// set option
collection.option('foo', 'bar');
collection.option({ foo: 'bar' });
// get option
console.log(collection.option('foo')); //=> 'bar'
```

### [.data](lib/common.js#L127)

Get or set data on `app.cache.data`.

**Params**

* `key` **{String|object}**
* `val` **{Object}**
* `returns` **{Object}**: Returns the instance when setting, or the value when getting.

**Example**

```js
// set data
collection.data('foo', 'bar');
collection.data({ foo: 'bar' });
// get data
console.log(collection.data('foo')); //=> 'bar'
```

### [.file](lib/common.js#L159)

Create a new file.

**Params**

* `key` **{String|object}**: The file path, or object.
* `val` **{Object}**: File object, when `key` is a path string.
* `returns` **{Object}**: Returns the file.

**Example**

```js
collection.file('/some/template.hbs', {});
collection.file({ path: '/some/template.hbs', contents: Buffer.from('...') });
```

### [.engine](lib/common.js#L196)

Register a file engine callback `fn` as `name`.

**Params**

* `exts` **{String|array}**: String or array of file extensions.
* `engine` **{Object|function}**: Engine object or function.
* `settings` **{Object}**: Optionally pass engine options as the last argument.
* `returns` **{Object}**: Returns the given or cached engine.

**Example**

```js
collection.engine('hbs', require('engine-handlebars'));
```

### [.helper](lib/common.js#L241)

Register a helper function as `name`, or get helper `name` if only one argument is passed.

**Params**

* `name` **{String|object}**: Helper name or object of helpers.
* `helper` **{Function}**: helper function, if name is not an object

**Example**

```js
collection.helper('lowercase', str => str.toLowerCase());
console.log(collection.helper('lowercase')) //=> [function lowercase]
```

### [.renderLayout](lib/common.js#L278)

Recursively renders layouts and "nested" layouts on the given `file`.

**Params**

* `file` **{Object}**
* `options` **{Object}**: Optionally pass an object of `layouts`.

**Example**

```js
collection.renderLayout(file);
```

### [.compile](lib/common.js#L322)

Compile `file` with the given `options`.

**Params**

* `file` **{Object|String}**: File object.
* `options` **{Object}**
* `returns` **{Object}**: Returns a promise with the file.

**Example**

```js
const file = collection.file({ path: 'some-file.hbs', contents: Buffer.from('...') });
collection.compile(file)
  .then(file => console.log(file.fn)) //=> [function]

// you can call the compiled function more than once
// to render the file with different data
file.fn({title: 'Foo'});
file.fn({title: 'Bar'});
file.fn({title: 'Baz'});
```

Prepare a file to be rendered. Gets the file, if `file.path` is defined,
creates options and context for the file, and detects the engine to use.
The options object will include any layouts, partials, or helpers to
pass to the engine.

**Params**

* **{object|string}**: val File or file.path.
* **{object}**: locals
* **{object}**: options
* `returns` **{object}**: Returns an object with `{ file, opts, context, engine }`

Render a file.

**Params**

* `file` **{Object|string}**: File path or object.
* `locals` **{Object}**: Data to use for rendering the file.
* **{Object}**: options
* `returns` **{Object}**

### [.handlers](lib/common.js#L497)

Add one or more middleware handler methods. Handler methods may also be added by passing an array of handler names to the constructor on the `handlers` option. This method is also aliased as `.handler()`.

**Params**

* `methods` **{String|array}**: Method names
* `options` **{Object}**
* `returns` **{Object}**: Returns the instance for chaining.

**Example**

```js
collection.handlers(['onLoad', 'preRender']);
```

### [.handle](lib/common.js#L529)

Run middleware `method` on the given `file`.

**Params**

* `method` **{String}**: Middleware method to run.
* `file` **{Object}**

**Example**

```js
// run a specific method
collection.handle('onLoad', file)
  .then(file => console.log('File:', file))
  .catch(console.error);

// run multiple methods
collection.handle('onLoad', file)
  .then(file => app.handle('preRender', file))
  .catch(console.error);

// run all methods
collection.handle(file)
  .then(file => console.log('File:', file))
  .catch(console.error);
```

Create the "key" to use for caching a file.

**Params**

* `file` **{Object}**
* `returns` **{String}**: Returns the key.

Returns true if the given value is an instance of `File`.

**Params**

* `val` **{Object}**
* `returns` **{Boolean}**

Get the `File` class to use for creating new files on the collection.

* `returns` **{Class}** `File`: Returns the File class.

## About

<details>
<summary><strong>Contributing</strong></summary>

Pull requests and stars are always welcome. For bugs and feature requests, [please create an issue](../../issues/new).

Please read the [contributing guide](.github/contributing.md) for advice on opening issues, pull requests, and coding standards.

</details>

<details>
<summary><strong>Running Tests</strong></summary>

Running and reviewing unit tests is a great way to get familiarized with a library and its API. You can install dependencies and run tests with the following command:

```sh
$ npm install && npm test
```

</details>

<details>
<summary><strong>Building docs</strong></summary>

_(This project's readme.md is generated by [verb](https://github.com/verbose/verb-generate-readme), please don't edit the readme directly. Any changes to the readme must be made in the [.verb.md](.verb.md) readme template.)_

To generate the readme, run the following command:

```sh
$ npm install -g verbose/verb#dev verb-generate-readme && verb
```

</details>

### Related projects

You might also be interested in these projects:

* [assemble](https://www.npmjs.com/package/assemble): Get the rocks out of your socks! Assemble makes you fast at creating web projects… [more](https://github.com/assemble/assemble) | [homepage](https://github.com/assemble/assemble "Get the rocks out of your socks! Assemble makes you fast at creating web projects. Assemble is used by thousands of projects for rapid prototyping, creating themes, scaffolds, boilerplates, e-books, UI components, API documentation, blogs, building websit")
* [generate](https://www.npmjs.com/package/generate): Command line tool and developer framework for scaffolding out new GitHub projects. Generate offers the… [more](https://github.com/generate/generate) | [homepage](https://github.com/generate/generate "Command line tool and developer framework for scaffolding out new GitHub projects. Generate offers the robustness and configurability of Yeoman, the expressiveness and simplicity of Slush, and more powerful flow control and composability than either.")
* [layouts](https://www.npmjs.com/package/layouts): Wraps templates with layouts. Layouts can use other layouts and be nested to any depth… [more](https://github.com/doowb/layouts) | [homepage](https://github.com/doowb/layouts "Wraps templates with layouts. Layouts can use other layouts and be nested to any depth. This can be used 100% standalone to wrap any kind of file with banners, headers or footer content. Use for markdown, HTML, handlebars views, lo-dash templates, etc. La")
* [update](https://www.npmjs.com/package/update): Be scalable! Update is a new, open source developer framework and CLI for automating updates… [more](https://github.com/update/update) | [homepage](https://github.com/update/update "Be scalable! Update is a new, open source developer framework and CLI for automating updates of any kind in code projects.")
* [verb](https://www.npmjs.com/package/verb): Documentation generator for GitHub projects. Verb is extremely powerful, easy to use, and is used… [more](https://github.com/verbose/verb) | [homepage](https://github.com/verbose/verb "Documentation generator for GitHub projects. Verb is extremely powerful, easy to use, and is used on hundreds of projects of all sizes to generate everything from API docs to readmes.")

### Contributors

| **Commits** | **Contributor** | 
| --- | --- |
| 753 | [jonschlinkert](https://github.com/jonschlinkert) |
| 109 | [doowb](https://github.com/doowb) |
| 1 | [janderland](https://github.com/janderland) |

### Author

**Jon Schlinkert**

* [GitHub Profile](https://github.com/jonschlinkert)
* [Twitter Profile](https://twitter.com/jonschlinkert)
* [LinkedIn Profile](https://linkedin.com/in/jonschlinkert)

### License

Copyright © 2018, [Jon Schlinkert](https://github.com/jonschlinkert).
Released under the [MIT License](LICENSE).

***

_This file was generated by [verb-generate-readme](https://github.com/verbose/verb-generate-readme), v0.6.0, on August 28, 2018._